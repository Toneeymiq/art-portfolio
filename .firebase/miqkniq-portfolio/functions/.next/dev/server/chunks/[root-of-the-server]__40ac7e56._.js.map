{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/user2/Documents/Media/Design/Art%20portfolio/portfolio/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getFirestore } from \"firebase/firestore\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBEgkHfGxQbQQzBQDEDj4D2QnKFDL6e-Do\",\n  authDomain: \"miqkniq-portfolio.firebaseapp.com\",\n  projectId: \"miqkniq-portfolio\",\n  storageBucket: \"miqkniq-portfolio.firebasestorage.app\",\n  messagingSenderId: \"662443810434\",\n  appId: \"1:662443810434:web:6c2d3feb1fc4fcbe2a1e9b\",\n  measurementId: \"G-WT5CRG63PC\"\n};\n\n// Initialize Firebase\nconst app = getApps().length > 0 ? getApp() : initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\nlet analytics;\nif (typeof window !== \"undefined\") {\n  analytics = getAnalytics(app);\n}\n\nexport { app, db, analytics };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AACA;AAAA;;;;AAEA,wCAAwC;AACxC,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,6KAAO,IAAG,MAAM,GAAG,IAAI,IAAA,4KAAM,MAAK,IAAA,mLAAa,EAAC;AAC5D,MAAM,KAAK,IAAA,mLAAY,EAAC;AAExB,IAAI;AACJ"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///Users/user2/Documents/Media/Design/Art%20portfolio/portfolio/app/api/comments/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { db } from '@/lib/firebase';\nimport { collection, query, where, orderBy, getDocs, addDoc, doc, updateDoc, deleteDoc, increment, arrayUnion, arrayRemove, Timestamp } from 'firebase/firestore';\nimport { Comment, CommentInput } from '@/types/comment';\n\n// GET - Fetch comments for a target (artwork or post) or all comments\nexport async function GET(request: NextRequest) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const targetId = searchParams.get('targetId');\n        const targetType = searchParams.get('targetType');\n        const fetchAll = searchParams.get('all') === 'true';\n\n        const commentsRef = collection(db, 'comments');\n        let q;\n\n        if (fetchAll) {\n            // Fetch all comments for admin dashboard\n            q = query(commentsRef, orderBy('createdAt', 'desc'));\n        } else {\n            if (!targetId || !targetType) {\n                return NextResponse.json({ error: 'targetId and targetType are required' }, { status: 400 });\n            }\n            q = query(\n                commentsRef,\n                where('targetId', '==', targetId),\n                where('targetType', '==', targetType),\n                orderBy('createdAt', 'desc')\n            );\n        }\n\n        const snapshot = await getDocs(q);\n        const comments: Comment[] = snapshot.docs.map(doc => {\n            const data = doc.data();\n            return {\n                id: doc.id,\n                targetId: data.targetId,\n                targetType: data.targetType,\n                parentId: data.parentId || undefined,\n                authorName: data.authorName || 'Anonymous',\n                content: data.content,\n                likes: data.likes || 0,\n                likedBy: data.likedBy || [],\n                createdAt: data.createdAt?.toDate() || new Date(),\n                updatedAt: data.updatedAt?.toDate() || undefined,\n            };\n        });\n\n        return NextResponse.json(comments);\n    } catch (error) {\n        console.error('Error fetching comments:', error);\n        return NextResponse.json({ error: 'Failed to fetch comments' }, { status: 500 });\n    }\n}\n\n// POST - Create a new comment\nexport async function POST(request: NextRequest) {\n    try {\n        const body: CommentInput = await request.json();\n\n        if (!body.targetId || !body.targetType || !body.content) {\n            return NextResponse.json({ error: 'targetId, targetType, and content are required' }, { status: 400 });\n        }\n\n        const newComment = {\n            targetId: body.targetId,\n            targetType: body.targetType,\n            parentId: body.parentId || null,\n            authorName: body.authorName?.trim() || 'Anonymous',\n            content: body.content.trim(),\n            likes: 0,\n            likedBy: [],\n            createdAt: Timestamp.now(),\n        };\n\n        const docRef = await addDoc(collection(db, 'comments'), newComment);\n\n        return NextResponse.json({\n            id: docRef.id,\n            ...newComment,\n            createdAt: new Date(),\n        }, { status: 201 });\n    } catch (error) {\n        console.error('Error creating comment:', error);\n        return NextResponse.json({ error: 'Failed to create comment' }, { status: 500 });\n    }\n}\n\n// DELETE - Delete a comment\nexport async function DELETE(request: NextRequest) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const commentId = searchParams.get('id');\n\n        if (!commentId) {\n            return NextResponse.json({ error: 'Comment ID is required' }, { status: 400 });\n        }\n\n        await deleteDoc(doc(db, 'comments', commentId));\n\n        return NextResponse.json({ success: true });\n    } catch (error) {\n        console.error('Error deleting comment:', error);\n        return NextResponse.json({ error: 'Failed to delete comment' }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":"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"}}]
}